<!-- The Claim Box -->

<div id="claim-box" class="mb-4">
  <div class="card-block d-flex p-0">
    <div class="dk-gry d-flex round-corners-l">
      <h4 class="align-self-center mb-0">
        <div class="p-3">
          <a id="claim-name"
            data-claim-id="{{ claim.id }}"
            contenteditable="false"
            style="color: black;"
            href="{% url 'viewClaim' claim.id %}">
            [[name]] [[editing]]
          </a>
        </div>
      </h4>
    </div>
    <div class='col-1 grad-gray-dtl'></div>
    <div class="card-text lt-gry w-100 d-flex">
      <p id="claim-content"
        class="align-self-center mb-0"
        data-claim-id="{{ claim.id }}"
        contenteditable="false">
        [[ content ]]
      </p>
    </div>
    <div class='col-1 grad-gray-ltd'></div>
    <div class="dk-gry round-corners-r">
      <div class="text-center d-flex flex-column justify-content-start p-3">
        <span id = "claim-affirmation"
          data-affirmation-id="{{ affirmation.id }}"
          data-claim-id="{{ claim.id }}"
          class="fa pb-2 fa-2x
                 {% if affirmation %} fa-check
                 {% else %} fa-plus
                 {% endif %}">
        </span>
        <h4 id = "num-affirmations"
          class="m-0">
          [[ num_affirmations ]]
        </h4>
      </div>
    </div>
    {% if user.is_authenticated %}
      <div class='btn-toolbar align-self-start ml-auto'>
        <button type="button"
                id="save-claim"
                class="btn btn-danger btn-sm"
                v-if="editing">
          Save
        </button>
        <button type='button'
                id="edit-claim"
                class='btn btn-primary btn-sm'
                v-on:click="toggleEditing"
                v-if="!editing">
          Edit
        </button>
      </div>
    {% endif %}
  </div>
</div>


<script type="text/javascript">

var claimbox = new Vue({
  el: '#claim-box',
  data: {
    name: '{{ claim.name }}',
    content: '{{ claim.content }}',
    num_affirmations: '{{ num_affirmations }}',
    editing: false
  },
  methods: {
    toggleEditing: function () {
      // this.message = this.message.split('').reverse().join('');
      $('#claim-name, #claim-content').attr("contenteditable", "true");
      claimbox.editing = true;
    }
  }
});

</script>
